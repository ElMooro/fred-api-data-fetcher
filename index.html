<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProTrade Financial Analytics Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-adapter-moment/1.0.1/chartjs-adapter-moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/2.2.1/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash/4.17.21/lodash.min.js"></script>
    <style>
        :root {
            /* Primary colors */
            --primary-dark: #1e2c3c;
            --primary: #2c3e50;
            --primary-light: #34495e;
            --secondary: #2980b9;
            --accent: #3498db;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #3498db;
            
            /* Neutral colors */
            --dark: #121212;
            --dark-gray: #2c3e50;
            --medium-gray: #7f8c8d;
            --light-gray: #ecf0f1;
            --white: #ffffff;
            
            /* Chart colors */
            --chart-primary: rgba(52, 152, 219, 1);
            --chart-secondary: rgba(46, 204, 113, 1);
            --chart-tertiary: rgba(155, 89, 182, 1);
            --chart-quaternary: rgba(241, 196, 15, 1);
            --chart-quinary: rgba(231, 76, 60, 1);
            
            /* Font */
            --font-primary: 'Roboto', 'Segoe UI', sans-serif;
            --font-secondary: 'Open Sans', Arial, sans-serif;
            --font-mono: 'Roboto Mono', monospace;
            
            /* Sizing */
            --header-height: 60px;
            --sidebar-width: 260px;
            --border-radius: 6px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .dark-theme {
            --primary-dark: #273746;
            --primary: #34495e;
            --primary-light: #3c556e;
            --secondary: #2980b9;
            --accent: #3498db;
            
            /* Neutral colors */
            --dark: #0f0f0f;
            --dark-gray: #1e272e;
            --medium-gray: #8395a7;
            --light-gray: #34495e;
            --white: #1e272e;
            
            /* Chart colors */
            --chart-primary: rgba(52, 152, 219, 1);
            --chart-secondary: rgba(46, 204, 113, 1);
            --chart-tertiary: rgba(155, 89, 182, 1);
            --chart-quaternary: rgba(241, 196, 15, 1);
            --chart-quinary: rgba(231, 76, 60, 1);
            
            color-scheme: dark;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-primary);
            font-size: 14px;
            line-height: 1.5;
            color: var(--dark-gray);
            background-color: var(--light-gray);
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        .dark-theme body {
            color: #e0e0e0;
            background-color: var(--dark);
        }

        /* Layout */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }

        .header {
            height: var(--header-height);
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 20px;
            color: white;
            text-decoration: none;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--white);
            border-right: 1px solid var(--light-gray);
            overflow-y: auto;
            transition: var(--transition);
            z-index: 100;
        }

        .dark-theme .sidebar {
            background-color: var(--dark-gray);
            border-right: 1px solid var(--primary-dark);
        }

        .sidebar-collapsed {
            width: 60px;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            position: relative;
        }

        .content-with-right-panel {
            margin-right: 300px;
        }

        .right-panel {
            position: fixed;
            top: var(--header-height);
            right: 0;
            width: 300px;
            height: calc(100vh - var(--header-height));
            background-color: var(--white);
            border-left: 1px solid var(--light-gray);
            overflow-y: auto;
            z-index: 90;
        }

        .dark-theme .right-panel {
            background-color: var(--dark-gray);
            border-left: 1px solid var(--primary-dark);
        }

        /* Sidebar Navigation */
        .nav-section {
            margin-bottom: 8px;
        }

        .nav-section-title {
            padding: 12px 16px;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--medium-gray);
            font-weight: 600;
        }

        .dark-theme .nav-section-title {
            color: rgba(255, 255, 255, 0.7);
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 10px 16px;
            color: var(--dark-gray);
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .dark-theme .nav-item {
            color: rgba(255, 255, 255, 0.9);
        }

        .nav-item:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }

        .nav-item.active {
            background-color: rgba(52, 152, 219, 0.1);
            color: var(--accent);
            border-left: 3px solid var(--accent);
        }

        .dark-theme .nav-item.active {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .nav-item-icon {
            margin-right: 12px;
            font-size: 18px;
            width: 20px;
            text-align: center;
        }

        .nav-item-text {
            flex: 1;
        }

        .sidebar-collapsed .nav-item-text,
        .sidebar-collapsed .nav-section-title {
            display: none;
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--dark-gray);
            border: 1px solid var(--medium-gray);
        }

        .dark-theme .btn-secondary {
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .dark-theme .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 13px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 20px;
        }

        .dark-theme .tabs {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            color: var(--medium-gray);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .tab:hover {
            color: var(--dark-gray);
        }

        .dark-theme .tab:hover {
            color: rgba(255, 255, 255, 0.9);
        }

        .tab.active {
            color: var(--accent);
        }

        .tab.active::after {
            content: "";
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }

        .dashboard-header {
            grid-column: span 12;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dashboard-title {
            font-size: 24px;
            font-weight: 500;
        }

        .dashboard-actions {
            display: flex;
            gap: 12px;
        }

        .timeframe-selector {
            display: flex;
            background-color: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .dark-theme .timeframe-selector {
            background-color: var(--dark-gray);
        }

        .timeframe-btn {
            padding: 8px 12px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            color: var(--dark-gray);
            transition: var(--transition);
        }

        .dark-theme .timeframe-btn {
            color: rgba(255, 255, 255, 0.9);
        }

        .timeframe-btn:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }

        .timeframe-btn.active {
            background-color: var(--accent);
            color: white;
        }

        /* Cards */
        .card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }

        .dark-theme .card {
            background-color: var(--dark-gray);
        }

        .card-header {
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .card-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-title {
            font-size: 16px;
            font-weight: 500;
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        .card-body {
            padding: 16px;
        }

        .card-footer {
            padding: 12px 16px;
            border-top: 1px solid var(--light-gray);
            font-size: 13px;
            color: var(--medium-gray);
        }

        .dark-theme .card-footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Chart specific cards */
        .chart-card {
            grid-column: span 12;
            display: flex;
            flex-direction: column;
        }

        .chart-card.half {
            grid-column: span 6;
        }

        @media (max-width: 1200px) {
            .chart-card.half {
                grid-column: span 12;
            }
        }

        .chart-container {
            flex: 1;
            position: relative;
            min-height: 400px;
            padding: 16px;
        }

        .chart-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--medium-gray);
        }

        .chart-toolbar {
            display: flex;
            justify-content: space-between;
            padding: 8px 16px;
            background-color: rgba(0, 0, 0, 0.02);
            border-top: 1px solid var(--light-gray);
            flex-wrap: wrap;
        }

        .dark-theme .chart-toolbar {
            background-color: rgba(255, 255, 255, 0.05);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-toolbar-section {
            display: flex;
            gap: 8px;
            margin: 4px 0;
            flex-wrap: wrap;
        }

        /* Metrics Cards */
        .metric-card {
            grid-column: span 3;
            padding: 16px;
        }

        @media (max-width: 992px) {
            .metric-card {
                grid-column: span 6;
            }
        }

        @media (max-width: 576px) {
            .metric-card {
                grid-column: span 12;
            }
        }

        .metric-title {
            font-size: 14px;
            color: var(--medium-gray);
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .metric-change {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 13px;
        }

        .metric-change.positive {
            color: var(--success);
        }

        .metric-change.negative {
            color: var(--danger);
        }

        /* Data Table */
        .table-container {
            grid-column: span 12;
            overflow: auto;
            max-height: 400px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 12px 16px;
            text-align: left;
        }

        .data-table th {
            font-weight: 500;
            color: var(--medium-gray);
            background-color: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--light-gray);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .dark-theme .data-table th {
            background-color: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .data-table tbody tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        .dark-theme .data-table tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .data-table td {
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .data-table td {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Controls Panel */
        .controls-panel {
            position: fixed;
            top: var(--header-height);
            right: 0;
            width: 360px;
            height: calc(100vh - var(--header-height));
            background-color: var(--white);
            border-left: 1px solid var(--light-gray);
            z-index: 100;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        .dark-theme .controls-panel {
            background-color: var(--dark-gray);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
        }

        .controls-panel.open {
            transform: translateX(0);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        }

        .controls-header {
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .controls-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .controls-title {
            font-size: 18px;
            font-weight: 500;
        }

        .controls-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--medium-gray);
        }

        .controls-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .controls-tabs {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .controls-tab {
            flex: 1;
            padding: 12px 16px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--medium-gray);
            font-weight: 500;
        }

        .controls-tab:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        .dark-theme .controls-tab:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .controls-tab.active {
            color: var(--accent);
            border-bottom: 2px solid var(--accent);
        }

        .controls-body {
            padding: 16px;
        }

        .controls-section {
            margin-bottom: 24px;
        }

        .controls-section-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--dark-gray);
        }

        .dark-theme .controls-section-title {
            color: rgba(255, 255, 255, 0.9);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-size: 13px;
            color: var(--medium-gray);
        }

        .dark-theme .form-label {
            color: rgba(255, 255, 255, 0.7);
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            background-color: var(--white);
            color: var(--dark-gray);
            transition: var(--transition);
        }

        .dark-theme .form-control {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        /* Switch */
        .switch-container {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 22px;
            margin-right: 12px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--light-gray);
            transition: var(--transition);
            border-radius: 22px;
        }

        .dark-theme .slider {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--accent);
        }

        input:checked + .slider:before {
            transform: translateX(18px);
        }

        .switch-label {
            font-size: 14px;
            color: var(--dark-gray);
        }

        .dark-theme .switch-label {
            color: rgba(255, 255, 255, 0.9);
        }

        /* Indicator chips */
        .indicators-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .indicator-chip {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: 16px;
            font-size: 13px;
            color: var(--accent);
        }

        .dark-theme .indicator-chip {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .indicator-chip-remove {
            margin-left: 6px;
            cursor: pointer;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
        }

        .dark-theme .indicator-chip-remove {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Tooltips */
        [data-tooltip] {
            position: relative;
        }

        [data-tooltip]:before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-4px);
            padding: 4px 8px;
            background-color: var(--dark-gray);
            color: white;
            font-size: 12px;
            border-radius: 4px;
            white-space: nowrap;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            z-index: 1000;
        }

        [data-tooltip]:hover:before {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-8px);
        }

        /* Loading indicator */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            visibility: hidden;
            opacity: 0;
            transition: var(--transition);
        }

        .dark-theme .loading-overlay {
            background-color: rgba(30, 39, 46, 0.8);
        }

        .loading-overlay.active {
            visibility: visible;
            opacity: 1;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(52, 152, 219, 0.2);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .controls-panel {
                width: 300px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: var(--header-height);
                left: 0;
                bottom: 0;
                transform: translateX(-100%);
                z-index: 1000;
            }

            .sidebar.open {
                transform: translateX(0);
                box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
            }

            .chart-card {
                grid-column: span 12;
            }
        }

        /* Icons (SVG) */
        .icon {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Chart Legend */
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            padding: 12px 16px;
            border-top: 1px solid var(--light-gray);
        }

        .dark-theme .chart-legend {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        /* Chart custom styles */
        .annotation-label {
            background-color: rgba(44, 62, 80, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
        }

        .dark-theme .annotation-label {
            background-color: rgba(255, 255, 255, 0.7);
            color: var(--dark);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--medium-gray);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-gray);
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 16px;
            background-color: var(--white);
            border-left: 4px solid var(--success);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
            z-index: 1000;
            max-width: 300px;
        }

        .dark-theme .notification {
            background-color: var(--dark-gray);
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification-title {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .notification-message {
            font-size: 13px;
            color: var(--medium-gray);
        }

        .dark-theme .notification-message {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Drawing tools panel */
        .drawing-tools {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .drawing-tool {
            padding: 6px;
            border-radius: 4px;
            background-color: transparent;
            border: 1px solid var(--light-gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .dark-theme .drawing-tool {
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .drawing-tool:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .dark-theme .drawing-tool:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .drawing-tool.active {
            background-color: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Patterns view */
        .pattern-card {
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            overflow: hidden;
        }

        .dark-theme .pattern-card {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pattern-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .pattern-header {
            background-color: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pattern-title {
            font-weight: 500;
            font-size: 15px;
        }

        .pattern-body {
            padding: 15px;
            display: flex;
            gap: 15px;
        }

        .pattern-chart {
            width: 120px;
            height: 80px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }

        .dark-theme .pattern-chart {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .pattern-info {
            flex: 1;
        }

        .pattern-description {
            font-size: 13px;
            color: var(--medium-gray);
            margin-bottom: 8px;
        }

        .dark-theme .pattern-description {
            color: rgba(255, 255, 255, 0.7);
        }

        .pattern-stats {
            display: flex;
            gap: 15px;
            font-size: 12px;
        }

        .pattern-stat {
            display: flex;
            flex-direction: column;
        }

        .pattern-stat-value {
            font-weight: 600;
        }

        .pattern-stat-label {
            color: var(--medium-gray);
        }

        .dark-theme .pattern-stat-label {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Backtesting UI */
        .backtest-builder {
            margin-bottom: 20px;
        }

        .strategy-rules {
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }

        .dark-theme .strategy-rules {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rule-header {
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--light-gray);
            font-weight: 500;
        }

        .dark-theme .rule-header {
            background-color: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .rule-body {
            padding: 15px;
        }

        .rule-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .rule-select {
            flex: 1;
        }

        .add-rule-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background-color: transparent;
            border: 1px dashed var(--light-gray);
            border-radius: var(--border-radius);
            color: var(--medium-gray);
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            justify-content: center;
            margin-top: 10px;
        }

        .dark-theme .add-rule-btn {
            border: 1px dashed rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.7);
        }

        .add-rule-btn:hover {
            background-color: rgba(0, 0, 0, 0.02);
            color: var(--dark-gray);
        }

        .dark-theme .add-rule-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.9);
        }

        /* Backtest results */
        .backtest-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .backtest-results {
                grid-template-columns: 1fr;
            }
        }

        .result-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 15px;
        }

        .dark-theme .result-card {
            background-color: var(--dark-gray);
        }

        .result-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .result-label {
            font-size: 13px;
            color: var(--medium-gray);
        }

        .dark-theme .result-label {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Correlation Heatmap */
        .heatmap-container {
            overflow-x: auto;
        }

        .heatmap {
            border-collapse: collapse;
            font-size: 12px;
        }

        .heatmap th, 
        .heatmap td {
            padding: 8px;
            text-align: center;
            min-width: 60px;
        }

        .heatmap td {
            transition: var(--transition);
        }

        .heatmap td:hover {
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .dark-theme .heatmap td:hover {
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        /* Screener */
        .screener-builder {
            margin-bottom: 20px;
        }

        .filter-group {
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }

        .dark-theme .filter-group {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-header {
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--light-gray);
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-theme .filter-header {
            background-color: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .filter-body {
            padding: 15px;
        }

        .filter-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .filter-category,
        .filter-operator,
        .filter-value {
            flex: 1;
        }

        /* Options chain */
        .options-chain {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            margin-bottom: 20px;
        }

        .options-header {
            grid-column: span 2;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .options-header {
            background-color: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .options-column {
            padding: 15px;
        }

        .options-column-title {
            text-align: center;
            font-weight: 500;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .options-column-title {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .option-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--light-gray);
            font-size: 13px;
        }

        .dark-theme .option-row {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .option-strike {
            font-weight: 500;
        }

        .option-price {
            color: var(--accent);
        }

        .option-volume,
        .option-oi {
            color: var(--medium-gray);
        }

        .dark-theme .option-volume,
        .dark-theme .option-oi {
            color: rgba(255, 255, 255, 0.6);
        }

        /* AI Insights */
        .ai-insight {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 15px;
        }

        .dark-theme .ai-insight {
            background-color: var(--dark-gray);
        }

        .ai-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(52, 152, 219, 0.1);
            color: var(--accent);
        }

        .dark-theme .ai-icon {
            background-color: rgba(52, 152, 219, 0.2);
        }

        .ai-content {
            flex: 1;
        }

        .ai-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .ai-message {
            font-size: 14px;
            color: var(--medium-gray);
            margin-bottom: 10px;
        }

        .dark-theme .ai-message {
            color: rgba(255, 255, 255, 0.7);
        }

        .ai-actions {
            display: flex;
            gap: 10px;
        }

        /* Multi-timeframe view */
        .timeframe-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 992px) {
            .timeframe-grid {
                grid-template-columns: 1fr;
            }
        }

        .timeframe-chart {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }

        .dark-theme .timeframe-chart {
            background-color: var(--dark-gray);
        }

        .timeframe-header {
            padding: 10px 15px;
            background-color: rgba(0, 0, 0, 0.02);
            border-bottom: 1px solid var(--light-gray);
            font-weight: 500;
        }

        .dark-theme .timeframe-header {
            background-color: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timeframe-body {
            padding: 15px;
            height: 200px;
        }

        /* Economic calendar */
        .calendar-event {
            display: flex;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .dark-theme .calendar-event {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .calendar-date {
            min-width: 80px;
            text-align: center;
        }

        .calendar-day {
            font-weight: 500;
            font-size: 16px;
        }

        .calendar-time {
            font-size: 12px;
            color: var(--medium-gray);
        }

        .dark-theme .calendar-time {
            color: rgba(255, 255, 255, 0.6);
        }

        .calendar-content {
            flex: 1;
        }

        .calendar-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .calendar-description {
            font-size: 13px;
            color: var(--medium-gray);
        }

        .dark-theme .calendar-description {
            color: rgba(255, 255, 255, 0.7);
        }

        .calendar-importance {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            text-transform: uppercase;
            background-color: var(--light-gray);
        }

        .calendar-importance.high {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--danger);
        }

        .calendar-importance.medium {
            background-color: rgba(241, 196, 15, 0.1);
            color: var(--warning);
        }

        .calendar-importance.low {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--success);
        }

        /* Volume profile */
        .volume-profile {
            position: relative;
            height: 300px;
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 15px;
            display: flex;
        }

        .dark-theme .volume-profile {
            background-color: var(--dark-gray);
        }

        .volume-bars {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .volume-bar {
            display: flex;
            align-items: center;
            height: 20px;
            margin-bottom: 5px;
        }

        .volume-label {
            min-width: 60px;
            font-size: 12px;
            text-align: right;
            padding-right: 10px;
        }

        .volume-line {
            flex: 1;
            height: 10px;
            background-color: rgba(52, 152, 219, 0.2);
            border-radius: 2px;
        }

        .volume-value {
            min-width: 50px;
            font-size: 12px;
            padding-left: 10px;
            color: var(--medium-gray);
        }

        .dark-theme .volume-value {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Social section */
        .social-post {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 15px;
            margin-bottom: 15px;
        }

        .dark-theme .social-post {
            background-color: var(--dark-gray);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .dark-theme .post-avatar {
            background-color: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
        }

        .post-user {
            flex: 1;
        }

        .post-name {
            font-weight: 500;
        }

        .post-handle {
            font-size: 12px;
            color: var(--medium-gray);
        }

        .dark-theme .post-handle {
            color: rgba(255, 255, 255, 0.6);
        }

        .post-content {
            margin-bottom: 10px;
        }

        .post-actions {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--medium-gray);
        }

        .dark-theme .post-actions {
            color: rgba(255, 255, 255, 0.6);
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Image preview (for chart patterns) */
        .image-preview {
            max-width: 100%;
            border-radius: var(--border-radius);
            margin: 10px 0;
            border: 1px solid var(--light-gray);
        }

        .dark-theme .image-preview {
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Risk management calculator */
        .risk-calculator {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 15px;
            margin-bottom: 20px;
        }

        .dark-theme .risk-calculator {
            background-color: var(--dark-gray);
        }

        .risk-result {
            background-color: rgba(0, 0, 0, 0.02);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 15px;
        }

        .dark-theme .risk-result {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .risk-value {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .risk-label {
            font-size: 12px;
            color: var(--medium-gray);
        }

        .dark-theme .risk-label {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Toolbar styles */
        .toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 10px;
            flex-wrap: wrap;
        }

        .dark-theme .toolbar {
            background-color: var(--dark-gray);
        }

        .toolbar-group {
            display: flex;
            gap: 5px;
            border-right: 1px solid var(--light-gray);
            padding-right: 10px;
            margin-right: 5px;
        }

        .dark-theme .toolbar-group {
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toolbar-group:last-child {
            border-right: none;
            padding-right: 0;
            margin-right: 0;
        }

        .toolbar-btn {
            padding: 6px;
            border-radius: 4px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .toolbar-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .dark-theme .toolbar-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .toolbar-btn.active {
            background-color: var(--accent);
            color: white;
        }

        /* Overlay for dialog */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s linear 0.25s, opacity 0.25s;
        }

        .modal-overlay.show {
            visibility: visible;
            opacity: 1;
            transition-delay: 0s;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 500px;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .dark-theme .modal-content {
            background-color: var(--dark-gray);
        }

        .modal-header {
            padding: 15px;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-theme .modal-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-weight: 500;
            font-size: 18px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--medium-gray);
        }

        .modal-body {
            padding: 15px;
        }

        .modal-footer {
            padding: 15px;
            border-top: 1px solid var(--light-gray);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .dark-theme .modal-footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="header-brand">
                <a href="#" class="logo">
                    <svg class="icon" viewBox="0 0 24 24">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                    </svg>
                    ProTrade Analytics
                </a>
                <button class="btn btn-icon btn-secondary" id="toggle-sidebar" data-tooltip="Toggle Sidebar">
                    <svg class="icon" viewBox="0 0 24 24">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" placeholder="Search symbol" class="form-control" id="symbol-search">
                </div>
                <button class="btn btn-secondary btn-sm" id="toggle-controls">
                    <svg class="icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                    Settings
                </button>
                <button class="btn btn-secondary btn-sm" id="toggle-theme">
                    <svg class="icon light-icon" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="icon dark-icon" viewBox="0 0 24 24" style="display: none;">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    Theme
                </button>
                <div class="dropdown" id="user-dropdown">
                    <div class="dropdown-toggle">
                        <div class="avatar">JP</div>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            Profile
                        </a>
                        <a href="#" class="dropdown-item">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                <polyline points="7 3 7 8 15 8"></polyline>
                            </svg>
                            My Presets
                        </a>
                        <a href="#" class="dropdown-item">
                            <svg class="icon" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                            Settings
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Logout
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-container">
            <aside class="sidebar" id="sidebar">
                <div class="nav-section">
                    <div class="nav-section-title">Main</div>
                    <ul class="nav-list">
                        <li class="nav-item active" data-page="dashboard">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </span>
                            <span class="nav-item-text">Dashboard</span>
                        </li>
                        <li class="nav-item" data-page="advanced-charts">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                </svg>
                            </span>
                            <span class="nav-item-text">Advanced Charts</span>
                        </li>
                        <li class="nav-item" data-page="multi-timeframe">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="3" y1="9" x2="21" y2="9"></line>
                                    <line x1="3" y1="15" x2="21" y2="15"></line>
                                    <line x1="9" y1="3" x2="9" y2="21"></line>
                                    <line x1="15" y1="3" x2="15" y2="21"></line>
                                </svg>
                            </span>
                            <span class="nav-item-text">Multi-Timeframe</span>
                        </li>
                        <li class="nav-item" data-page="pattern-recognition">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Pattern Recognition</span>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Technical Analysis</div>
                    <ul class="nav-list">
                        <li class="nav-item" data-page="indicators">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                </svg>
                            </span>
                            <span class="nav-item-text">Technical Indicators</span>
                        </li>
                        <li class="nav-item" data-page="fibonacci">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="2" y1="12" x2="22" y2="12"></line>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Fibonacci Tools</span>
                        </li>
                        <li class="nav-item" data-page="drawing-tools">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                                    <path d="M2 2l7.586 7.586"></path>
                                    <circle cx="11" cy="11" r="2"></circle>
                                </svg>
                            </span>
                            <span class="nav-item-text">Drawing Tools</span>
                        </li>
                        <li class="nav-item" data-page="volume-analysis">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M7 16V4M17 16V4M3 8h4m10 0h4M7 20h10M12 4v16"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Volume Analysis</span>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Trading Tools</div>
                    <ul class="nav-list">
                        <li class="nav-item" data-page="screener">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                                </svg>
                            </span>
                            <span class="nav-item-text">Stock Screener</span>
                        </li>
                        <li class="nav-item" data-page="backtesting">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Backtesting</span>
                        </li>
                        <li class="nav-item" data-page="options">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <line x1="4" y1="21" x2="4" y2="14"></line>
                                    <line x1="4" y1="10" x2="4" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="12"></line>
                                    <line x1="12" y1="8" x2="12" y2="3"></line>
                                    <line x1="20" y1="21" x2="20" y2="16"></line>
                                    <line x1="20" y1="12" x2="20" y2="3"></line>
                                    <line x1="1" y1="14" x2="7" y2="14"></line>
                                    <line x1="9" y1="8" x2="15" y2="8"></line>
                                    <line x1="17" y1="16" x2="23" y2="16"></line>
                                </svg>
                            </span>
                            <span class="nav-item-text">Options Analytics</span>
                        </li>
                        <li class="nav-item" data-page="risk-management">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Risk Management</span>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Market Data</div>
                    <ul class="nav-list">
                        <li class="nav-item" data-page="correlation">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <rect x="7" y="7" width="3" height="9"></rect>
                                    <rect x="14" y="7" width="3" height="5"></rect>
                                </svg>
                            </span>
                            <span class="nav-item-text">Correlation Analysis</span>
                        </li>
                        <li class="nav-item" data-page="economic-calendar">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                            </span>
                            <span class="nav-item-text">Economic Calendar</span>
                        </li>
                        <li class="nav-item" data-page="market-breadth">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                                    <path d="M3 5c0 1.66 4 3 9 3s9-1.34 9-3"></path>
                                    <path d="M3 12c0 1.66 4 3 9 3s9-1.34 9-3"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Market Breadth</span>
                        </li>
                        <li class="nav-item" data-page="order-flow">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Order Flow Analysis</span>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">AI & Social</div>
                    <ul class="nav-list">
                        <li class="nav-item" data-page="ai-insights">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                            </span>
                            <span class="nav-item-text">AI Insights</span>
                        </li>
                        <li class="nav-item" data-page="sentiment">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>
                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>
                                </svg>
                            </span>
                            <span class="nav-item-text">Sentiment Analysis</span>
                        </li>
                        <li class="nav-item" data-page="social">
                            <span class="nav-item-icon">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                </svg>
                            </span>
                            <span class="nav-item-text">Social & Collaboration</span>
                        </li>
                    </ul>
                </div>
            </aside>

            <main class="content" id="main-content">
                <!-- Dashboard Page -->
                <div class="page active" id="dashboard-page">
                    <div class="dashboard">
                        <div class="dashboard-header">
                            <h1 class="dashboard-title">AAPL - Apple Inc.</h1>
                            <div class="dashboard-actions">
                                <div class="timeframe-selector">
                                    <button class="timeframe-btn" data-timeframe="1D">1D</button>
                                    <button class="timeframe-btn" data-timeframe="1W">1W</button>
                                    <button class="timeframe-btn" data-timeframe="1M">1M</button>
                                    <button class="timeframe-btn active" data-timeframe="3M">3M</button>
                                    <button class="timeframe-btn" data-timeframe="6M">6M</button>
                                    <button class="timeframe-btn" data-timeframe="1Y">1Y</button>
                                    <button class="timeframe-btn" data-timeframe="5Y">5Y</button>
                                    <button class="timeframe-btn" data-timeframe="MAX">MAX</button>
                                </div>
                                <button class="btn btn-secondary btn-sm" id="custom-date-btn">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                    Custom
                                </button>
                                <button class="btn btn-primary btn-sm">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="12" y1="8" x2="12" y2="16"></line>
                                        <line x1="8" y1="12" x2="16" y2="12"></line>
                                    </svg>
                                    Add Chart
                                </button>
                            </div>
                        </div>

                        <!-- Metrics Row -->
                        <div class="card metric-card">
                            <div class="metric-title">Current Price</div>
                            <div class="metric-value">$187.43</div>
                            <div class="metric-change positive">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <polyline points="18 15 12 9 6 15"></polyline>
                                </svg>
                                +2.5% today
                            </div>
                        </div>

                        <div class="card metric-card">
                            <div class="metric-title">YTD Return</div>
                            <div class="metric-value">+24.7%</div>
                            <div class="metric-change positive">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <polyline points="18 15 12 9 6 15"></polyline>
                                </svg>
                                +5.3% vs S&P 500
                            </div>
                        </div>

                        <div class="card metric-card">
                            <div class="metric-title">52W High/Low</div>
                            <div class="metric-value">$198.23 / $124.17</div>
                            <div class="metric-change">
                                5.8% below 52W high
                            </div>
                        </div>

                        <div class="card metric-card">
                            <div class="metric-title">Volatility (30D)</div>
                            <div class="metric-value">17.8%</div>
                            <div class="metric-change negative">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                                -2.3% MoM
                            </div>
                        </div>

                        <!-- Main Chart with Advanced Tools -->
                        <div class="card chart-card">
                            <div class="card-header">
                                <h3 class="card-title">Advanced Chart with Technical Analysis</h3>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Fullscreen">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                                        </svg>
                                    </button>
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Share">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="18" cy="5" r="3"></circle>
                                            <circle cx="6" cy="12" r="3"></circle>
                                            <circle cx="18" cy="19" r="3"></circle>
                                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                                        </svg>
                                    </button>
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Export">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Drawing Tools Toolbar -->
                            <div class="toolbar">
                                <div class="toolbar-group">
                                    <button class="toolbar-btn active" data-tooltip="Candlestick">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M7 5v14M17 5v14M7 10h4v4H7zM17 5h-4v4h4zM17 15h-4v4h4z"></path>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Line">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="OHLC">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M5 8h4M5 12h2M5 16h5M19 8h-4M19 12h-2M19 16h-5"></path>
                                            <path d="M7 4v16M17 4v16"></path>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Area">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M22 12C22 12 19 18 16 18C13 18 13 12 10 12C7 12 6 18 3 18L3 21L22 21L22 12Z"></path>
                                            <path d="M22 12C22 12 19 6 16 6C13 6 13 12 10 12C7 12 6 6 3 6L3 3L22 3L22 12Z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <button class="toolbar-btn" data-tooltip="Trend Line">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <line x1="4" y1="19" x2="20" y2="5"></line>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Horizontal Line">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <line x1="4" y1="12" x2="20" y2="12"></line>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Channel">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <line x1="4" y1="7" x2="20" y2="7"></line>
                                            <line x1="4" y1="17" x2="20" y2="17"></line>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Fibonacci">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <line x1="4" y1="19" x2="20" y2="5"></line>
                                            <line x1="4" y1="14.5" x2="20" y2="14.5"></line>
                                            <line x1="4" y1="12.5" x2="20" y2="12.5"></line>
                                            <line x1="4" y1="10" x2="20" y2="10"></line>
                                            <line x1="4" y1="7.5" x2="20" y2="7.5"></line>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Pitchfork">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M12 3L4 15h8l-1 6h2l1-6h8L12 3z"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <button class="toolbar-btn" data-tooltip="Rectangle">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <rect x="4" y="6" width="16" height="12"></rect>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Ellipse">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="8"></circle>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Triangle">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M12 3L4 18h16L12 3z"></path>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Text">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <line x1="4" y1="6" x2="20" y2="6"></line>
                                            <line x1="12" y1="6" x2="12" y2="18"></line>
                                        </svg>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <button class="toolbar-btn" data-tooltip="Measure">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M2 11h20"></path>
                                            <path d="M4 11v2"></path>
                                            <path d="M8 11v2"></path>
                                            <path d="M12 11v2"></path>
                                            <path d="M16 11v2"></path>
                                            <path d="M20 11v2"></path>
                                            <path d="M2 7v10"></path>
                                            <path d="M22 7v10"></path>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Brush">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                                            <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                                            <path d="M2 2l7.586 7.586"></path>
                                        </svg>
                                    </button>
                                    <button class="toolbar-btn" data-tooltip="Eraser">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M20 20H9l-7-7c-1.5-1.5-1.5-3.5 0-5l5-5c1.5-1.5 3.5-1.5 5 0l7 7c1.5 1.5 1.5 3.5 0 5l-5 5z"></path>
                                            <line x1="9" y1="16" x2="14" y2="11"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="chart-container">
                                <canvas id="mainChart"></canvas>
                                <div class="loading-overlay" id="mainChartLoading">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                            
                            <div class="chart-toolbar">
                                <div class="chart-toolbar-section">
                                    <button class="btn btn-sm btn-secondary" id="toggle-sma">SMA</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-ema">EMA</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-bollinger">Bollinger</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-ichimoku">Ichimoku</button>
                                </div>
                                <div class="chart-toolbar-section">
                                    <button class="btn btn-sm btn-secondary" id="toggle-volume">Volume</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-macd">MACD</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-rsi">RSI</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-stoch">Stochastic</button>
                                </div>
                                <div class="chart-toolbar-section">
                                    <button class="btn btn-sm btn-secondary" id="toggle-vwap">VWAP</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-pivots">Pivots</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-fibonacci">Fibonacci</button>
                                    <button class="btn btn-sm btn-secondary" id="toggle-patterns">Patterns</button>
                                </div>
                            </div>
                        </div>

                        <!-- Volume Profile and Market Profile -->
                        <div class="card chart-card half">
                            <div class="card-header">
                                <h3 class="card-title">Volume Profile Analysis</h3>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Fullscreen">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                                        </svg>
                                    </button>
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Settings">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="3"></circle>
                                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="volumeProfileChart"></canvas>
                                <div class="loading-overlay" id="volumeProfileLoading">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Order Flow Analysis -->
                        <div class="card chart-card half">
                            <div class="card-header">
                                <h3 class="card-title">Order Flow Analysis</h3>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Fullscreen">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>
                                        </svg>
                                    </button>
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Settings">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="3"></circle>
                                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="orderFlowChart"></canvas>
                                <div class="loading-overlay" id="orderFlowLoading">
                                    <div class="spinner"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Pattern Recognition Section -->
                        <div class="card chart-card">
                            <div class="card-header">
                                <h3 class="card-title">Chart Pattern Recognition</h3>
                                <div class="card-actions">
                                    <button class="btn btn-sm btn-secondary">Show All</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="pattern-card">
                                    <div class="pattern-header">
                                        <div class="pattern-title">Head and Shoulders</div>
                                        <div class="pattern-badge">Bearish</div>
                                    </div>
                                    <div class="pattern-body">
                                        <div class="pattern-chart">
                                            <!-- Mini chart visualization goes here -->
                                        </div>
                                        <div class="pattern-info">
                                            <div class="pattern-description">A bearish reversal pattern consisting of three peaks, with the middle peak (head) being the highest.</div>
                                            <div class="pattern-stats">
                                                <div class="pattern-stat">
                                                    <div class="pattern-stat-value">78%</div>
                                                    <div class="pattern-stat-label">Accuracy</div>
                                                </div>
                                                <div class="pattern-stat">
                                                    <div class="pattern-stat-value">-6.2%</div>
                                                    <div class="pattern-stat-label">Avg. Movement</div>
                                                </div>
                                                <div class="pattern-stat">
                                                    <div class="pattern-stat-value">15d</div>
                                                    <div class="pattern-stat-label">Avg. Duration</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="pattern-card">
                                    <div class="pattern-header">
                                        <div class="pattern-title">Cup and Handle</div>
                                        <div class="pattern-badge">Bullish</div>
                                    </div>
                                    <div class="pattern-body">
                                        <div class="pattern-chart">
                                            <!-- Mini chart visualization goes here -->
                                        </div>
                                        <div class="pattern-info">
                                            <div class="pattern-description">A bullish continuation pattern resembling a cup with a handle, signaling a pause in an uptrend.</div>
                                            <div class="pattern-stats">
                                                <div class="pattern-stat">
                                                    <div class="pattern-stat-value">83%</div>
                                                    <div class="pattern-stat-label">Accuracy</div>
                                                </div>
                                                <div class="pattern-stat">
                                                    <div class="pattern-stat-value">+8.4%</div>
                                                    <div class="pattern-stat-label">Avg. Movement</div>
                                                </div>
                                                <div class="pattern-stat">
                                                    <div class="pattern-stat-value">22d</div>
                                                    <div class="pattern-stat-label">Avg. Duration</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Options Chain Analysis -->
                        <div class="card chart-card">
                            <div class="card-header">
                                <h3 class="card-title">Options Chain Analysis</h3>
                                <div class="card-actions">
                                    <button class="btn btn-sm btn-secondary">Jun 21, 2025</button>
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Settings">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="3"></circle>
                                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="options-chain">
                                    <div class="options-header">
                                        <div>IV: 24.5%</div>
                                        <div>Current: $187.43</div>
                                        <div>PCR: 0.85</div>
                                    </div>
                                    <div class="options-column">
                                        <div class="options-column-title">Calls</div>
                                        <div class="option-row">
                                            <div class="option-price">$15.45</div>
                                            <div class="option-strike">$175</div>
                                            <div class="option-volume">1,243</div>
                                            <div class="option-oi">4,568</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$12.30</div>
                                            <div class="option-strike">$180</div>
                                            <div class="option-volume">2,145</div>
                                            <div class="option-oi">6,821</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$9.75</div>
                                            <div class="option-strike">$185</div>
                                            <div class="option-volume">3,542</div>
                                            <div class="option-oi">8,764</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$7.20</div>
                                            <div class="option-strike">$190</div>
                                            <div class="option-volume">4,321</div>
                                            <div class="option-oi">9,876</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$4.85</div>
                                            <div class="option-strike">$195</div>
                                            <div class="option-volume">2,987</div>
                                            <div class="option-oi">7,531</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$2.90</div>
                                            <div class="option-strike">$200</div>
                                            <div class="option-volume">1,876</div>
                                            <div class="option-oi">5,321</div>
                                        </div>
                                    </div>
                                    <div class="options-column">
                                        <div class="options-column-title">Puts</div>
                                        <div class="option-row">
                                            <div class="option-price">$2.75</div>
                                            <div class="option-strike">$175</div>
                                            <div class="option-volume">1,122</div>
                                            <div class="option-oi">3,654</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$4.20</div>
                                            <div class="option-strike">$180</div>
                                            <div class="option-volume">1,832</div>
                                            <div class="option-oi">5,427</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$6.15</div>
                                            <div class="option-strike">$185</div>
                                            <div class="option-volume">2,431</div>
                                            <div class="option-oi">6,542</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$8.35</div>
                                            <div class="option-strike">$190</div>
                                            <div class="option-volume">3,654</div>
                                            <div class="option-oi">8,321</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$11.20</div>
                                            <div class="option-strike">$195</div>
                                            <div class="option-volume">2,541</div>
                                            <div class="option-oi">6,210</div>
                                        </div>
                                        <div class="option-row">
                                            <div class="option-price">$14.75</div>
                                            <div class="option-strike">$200</div>
                                            <div class="option-volume">1,562</div>
                                            <div class="option-oi">4,125</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Insights Section -->
                        <div class="card chart-card">
                            <div class="card-header">
                                <h3 class="card-title">AI Market Insights</h3>
                                <div class="card-actions">
                                    <button class="btn btn-sm btn-secondary">Refresh Insights</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="ai-insight">
                                    <div class="ai-icon">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polyline points="12 6 12 12 16 14"></polyline>
                                        </svg>
                                    </div>
                                    <div class="ai-content">
                                        <div class="ai-title">Price Pattern Detected</div>
                                        <div class="ai-message">Our AI has detected a bullish cup and handle pattern forming over the last 3 months with an 85% confidence rating. Historical data suggests a potential 8.4% upside movement over the next 22 trading days.</div>
                                        <div class="ai-actions">
                                            <button class="btn btn-sm btn-secondary">Show on Chart</button>
                                            <button class="btn btn-sm btn-secondary">Analysis Details</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="ai-insight">
                                    <div class="ai-icon">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                        </svg>
                                    </div>
                                    <div class="ai-content">
                                        <div class="ai-title">Sentiment Analysis</div>
                                        <div class="ai-message">Social media sentiment has turned increasingly positive in the last 7 days, with a 23% increase in bullish mentions. Institutional analyst ratings show 18 buys, 7 holds, and 2 sells with an average price target of $210.</div>
                                        <div class="ai-actions">
                                            <button class="btn btn-sm btn-secondary">View Full Report</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="ai-insight">
                                    <div class="ai-icon">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                    </div>
                                    <div class="ai-content">
                                        <div class="ai-title">Upcoming Events</div>
                                        <div class="ai-message">Earnings report scheduled for June 15, 2025. Historical volatility increases by an average of 12% in the week leading to earnings announcements. Options market implies a potential 5.2% move in either direction.</div>
                                        <div class="ai-actions">
                                            <button class="btn btn-sm btn-secondary">Add to Calendar</button>
                                            <button class="btn btn-sm btn-secondary">View Historical Reactions</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Risk Management Section -->
                        <div class="card chart-card half">
                            <div class="card-header">
                                <h3 class="card-title">Risk Management Calculator</h3>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-secondary" data-tooltip="Settings">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="3"></circle>
                                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label class="form-label">Account Size</label>
                                    <input type="number" class="form-control" id="account-size" value="100000">
                                </div>
                                <div class="form-group">